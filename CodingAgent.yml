app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: CodingAgent
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.8@aae2be0913b8c6f0b80cff58e08d7a8b4c214569b41778413fcaea204561ff16
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: api_key
    id: 8bb0dd50-b7f4-4420-9b17-08173e54adaa
    name: API_KEY
    selector:
    - env
    - API_KEY
    value: ''
    value_type: secret
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1766665854400-source-1766666534467-target
      selected: false
      source: '1766665854400'
      sourceHandle: source
      target: '1766666534467'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: 1766666534467-source-1766666714696-target
      selected: false
      source: '1766666534467'
      sourceHandle: source
      target: '1766666714696'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: if-else
        targetType: loop-end
      id: 17666823941251-false-1766682485472-target
      selected: false
      source: '17666823941251'
      sourceHandle: 'false'
      target: '1766682485472'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: if-else
        targetType: llm
      id: 17666823941251-true-1766682500741-target
      selected: false
      source: '17666823941251'
      sourceHandle: 'true'
      target: '1766682500741'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInLoop: false
        sourceType: loop
        targetType: end
      id: 1766681217998-source-1766680328187-target
      selected: false
      source: '1766681217998'
      sourceHandle: source
      target: '1766680328187'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: http-request
        targetType: code
      id: 1766769039651-source-1766769356726-target
      selected: false
      source: '1766769039651'
      sourceHandle: source
      target: '1766769356726'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: code
        targetType: if-else
      id: 1766769356726-source-17666823941251-target
      selected: false
      source: '1766769356726'
      sourceHandle: source
      target: '17666823941251'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1766666714696-source-17667737781900-target
      source: '1766666714696'
      sourceHandle: source
      target: '17667737781900'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: llm
        targetType: code
      id: 1766682500741-source-1766771232701-target
      source: '1766682500741'
      sourceHandle: source
      target: '1766771232701'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: code
        targetType: assigner
      id: 1766771232701-source-1766682647945-target
      source: '1766771232701'
      sourceHandle: source
      target: '1766682647945'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: loop-start
        targetType: code
      id: 1766681217998start-source-1766774144559-target
      source: 1766681217998start
      sourceHandle: source
      target: '1766774144559'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        sourceType: code
        targetType: http-request
      id: 1766774144559-source-1766769039651-target
      source: '1766774144559'
      sourceHandle: source
      target: '1766769039651'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1766667562386-source-17668141792250-target
      source: '1766667562386'
      sourceHandle: source
      target: '17668141792250'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: loop
      id: 17668141792250-source-1766681217998-target
      source: '17668141792250'
      sourceHandle: source
      target: '1766681217998'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 17667737781900-source-1766667562386-target
      source: '17667737781900'
      sourceHandle: source
      target: '1766667562386'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: ç”¨æˆ·è¾“å…¥
        type: start
        variables:
        - default: æˆ‘è¦ä¸€ä¸ªè²ªåƒè›‡æ¸¸æˆ
          hint: ''
          label: project_requirement
          max_length: 256
          options: []
          placeholder: ''
          required: true
          type: text-input
          variable: project_requirement
      height: 108
      id: '1766665854400'
      position:
        x: 0
        y: 205
      positionAbsolute:
        x: 0
        y: 205
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: true
          variable_selector:
          - '1766665854400'
          - project_requirement
        desc: generate user story
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 2cdd8318-3c97-4b5a-b3e3-cc60043b603f
          role: system
          text: 'ä»¥ä¸‹æ˜¯ç”¨æˆ·çš„åŸå§‹éœ€æ±‚ï¼š

            {{#1766665854400.project_requirement#}}

            ä½ çš„ä»»åŠ¡æ˜¯å°†è¯¥éœ€æ±‚æ‹†è§£ä¸ºå·¥ç¨‹å¯å®ç°çš„è§„èŒƒè¯´æ˜ï¼Œä¾›åç»­ Coder ä¸ Testcase Agent ä½¿ç”¨ã€‚

            è¯·ä¸¥æ ¼æŒ‰ä»¥ä¸‹ç»“æ„è¾“å‡ºï¼ˆå¿…é¡»åŒ…å«æ‰€æœ‰å­—æ®µï¼‰ï¼š

            [PROJECT_SUMMARY]

            ç”¨1å¥è¯æ¦‚æ‹¬è¿™ä¸ªé¡¹ç›®çš„ç›®æ ‡ã€‚

            [USER_STORIES]

            åˆ—å‡º 3â€“5 æ¡ User Storyã€‚æ¯æ¡å¿…é¡»åŒ…å«ï¼š

            - roleï¼šç”¨æˆ·èº«ä»½

            - behaviorï¼šç”¨æˆ·å¯ä»¥åšä»€ä¹ˆ

            - goalï¼šè¿™æ ·åšçš„ç›®çš„

            [ACCEPTANCE_CRITERIA]

            é’ˆå¯¹æ¯æ¡ User Storyï¼Œåˆ—å‡ºæ˜ç¡®ã€å¯éªŒè¯çš„éªŒæ”¶æ ‡å‡†ã€‚

            [NON_GOALS]

            æ˜ç¡®æŒ‡å‡ºæœ¬é¡¹ç›®ä¸éœ€è¦å®ç°çš„åŠŸèƒ½ï¼Œé¿å…è¿‡åº¦è®¾è®¡ã€‚

            è¦æ±‚ï¼š

            - è¾“å‡ºå¿…é¡»æ¸…æ™°ã€ç»“æ„åŒ–

            - ä¸è¦è¾“å‡ºä»»ä½•ä»£ç 

            - ä¸è¦è§£é‡Šä½ çš„æ€è€ƒè¿‡ç¨‹'
        selected: false
        structured_output_enabled: false
        title: user story agent
        type: llm
        vision:
          enabled: false
      height: 115
      id: '1766666534467'
      position:
        x: 342
        y: 201
      positionAbsolute:
        x: 342
        y: 201
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        context:
          enabled: true
          variable_selector:
          - '1766666534467'
          - text
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 23f3f79a-727f-4a7d-a66c-aa4218c082dd
          role: system
          text: 'ä½ æ˜¯ Coder Agentã€‚è¯·æ ¹æ®ä»¥ä¸‹user story{{#1766666534467.text#}}ç¼–å†™å®Œæ•´çš„ã€å¯è¿è¡Œçš„ä»£ç ã€‚

            ä¸¥æ ¼éµå®ˆä»¥ä¸‹è¦æ±‚ï¼š

            1. åªä½¿ç”¨ Python æ ‡å‡†åº“ï¼ˆé™¤éè§„èŒƒä¸­æ˜ç¡®å…è®¸ç¬¬ä¸‰æ–¹åº“ï¼‰

            2. å¿…é¡»æ˜¯å•æ–‡ä»¶ç¨‹åº

            3. å¿…é¡»åŒ…å«æ¸…æ™°çš„ç¨‹åºå…¥å£ï¼ˆif __name__ == "__main__":ï¼‰

            4. ç¨‹åºå¯ä»¥ç›´æ¥é€šè¿‡ `python main.py`ï¼ˆæˆ–ç­‰ä»·æ–¹å¼ï¼‰è¿è¡Œ

            5. ä¸è¦å®ç°è§„èŒƒä¸­æ˜ç¡®æ ‡æ³¨ä¸º NON_GOALS çš„å†…å®¹

            è¾“å‡ºè¦æ±‚ï¼š

            - åªè¾“å‡ºå®Œæ•´ä»£ç 

            - ä¸è¦åŒ…å«ä»»ä½•è§£é‡Šã€æ³¨é‡Šè¯´æ˜æˆ– Markdown æ ‡è®°

            '
        selected: false
        title: initial coder
        type: llm
        vision:
          enabled: false
      height: 87
      id: '1766666714696'
      position:
        x: 683
        y: 215
      positionAbsolute:
        x: 683
        y: 215
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        context:
          enabled: true
          variable_selector:
          - '1766666534467'
          - text
        desc: generate testcase using unittest
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: f17d1b2b-04a4-4b88-867a-0085ea8727e9
          role: system
          text: "# Role\nä½ æ˜¯ä¸€ä¸ª Python QA æµ‹è¯•ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯ä¸ºç»™å®šçš„ä»£ç ç¼–å†™ `unittest` æµ‹è¯•ç”¨ä¾‹ã€‚\n\n# Inputs\n\
            ä½ æ‹¥æœ‰ä»¥ä¸‹è¾“å…¥ï¼š\n1. **User Story (ç”¨æˆ·éœ€æ±‚):** `{{#1766666534467.text#}}`\n2. **Source\
            \ Code (ä¸šåŠ¡ä»£ç ):** `{{#17667737781900.current_code#}}` - è¿™æ˜¯ä¸Šä¸€æ­¥ç”Ÿæˆçš„ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚\n\
            \n# Execution Context (CRITICAL)\nä½ çš„æµ‹è¯•ä»£ç å°†åœ¨ä¸€ä¸ª**å…±äº«å†…å­˜ç¯å¢ƒ**ä¸­è¿è¡Œï¼š\n1. **NO IMPORTS:**\
            \ å‡è®¾ `Source Code` ä¸­çš„å‡½æ•°å’Œç±»**å·²ç»å®šä¹‰åœ¨å½“å‰ç¯å¢ƒ**ä¸­ã€‚ä¸è¦å¯¼å…¥ä»»ä½•`Source Code`ä¸­çš„åŒ…ï¼Œç›´æ¥è°ƒç”¨ä¸šåŠ¡å‡½æ•°å³å¯ã€‚\n\
            \   - ä¾‹å¦‚ï¼šå¦‚æœæºä»£ç é‡Œå®šä¹‰äº† `def add(a,b):`ï¼Œä½ çš„æµ‹è¯•é‡Œç›´æ¥å†™ `add(1, 2)`ã€‚\n2. **Library\
            \ Imports:** ä½ ä¾ç„¶éœ€è¦å¯¼å…¥ `unittest` å’Œ `unittest.mock`ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚\n\nRULE: NO MENTAL\
            \ MATH (ç¦æ­¢å¿ƒç®—) When writing assertEqual, DO NOT calculate the expected\
            \ value yourself. Write the mathematical expression and let Python calculate\
            \ it.\nâŒ Bad: self.assertEqual(result, 27) (You might calculate wrong)\
            \ âœ… Good: self.assertEqual(result, 12 + (10 - 5) * 3) (Safe & Accurate)\n\
            \n\n# Workflow\n1. **Analyze Code:** é˜…è¯» `Source Code`ï¼Œæå–ä¸»å‡½æ•°åæˆ–ç±»åï¼ˆä¾‹å¦‚ `solution`\
            \ æˆ– `calculate_tax`ï¼‰ã€‚\n2. **Verify Logic:** æ ¹æ® `User Story` ç†è§£é¢„æœŸçš„è¾“å…¥è¾“å‡ºã€‚\n\
            3. **Write Tests:** ç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ª `unittest.TestCase` çš„ç±»ã€‚\n   - åŒ…å«æ­£å¸¸æƒ…å†µ (Happy\
            \ Path)ã€‚\n   - åŒ…å«è¾¹ç•Œæƒ…å†µ (Edge Cases)ã€‚\n\n# Output Format (JSON)\nè¯·è¾“å‡ºä¸”ä»…è¾“å‡ºä¸€ä¸ª\
            \ JSON åˆ—è¡¨ï¼Œä»£è¡¨ä½ çš„æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ï¼Œåˆ—è¡¨é‡Œçš„æ¯ä¸ªjson objectä»£è¡¨ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ã€‚å³ä½¿ä½ è§‰å¾—åªéœ€è¦ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œä¹Ÿè¦ç”¨jsonåˆ—è¡¨æ¥åŒ…è£…\n\
            \næ ¼å¼è¦æ±‚ï¼š\n```json\n[\n  {\n    \"filename\": \"test.py\",\n    \"suffix\"\
            : \"py\",\n    \"content\": \"import unittest\\n\\nclass TestSolution(unittest.TestCase):\\\
            n    def test_case_1(self):\\n        # ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œæ— éœ€å¯¼å…¥\\n        self.assertEqual(solution(1,\
            \ 2), 3)\",\n    \"type\": \"test\"\n  }\n]\n\nConstraints:\nä¸è¦åŒ…å« Markdown\
            \ ä»£ç å—æ ‡è®°ï¼ˆå¦‚ ```pythonï¼‰ã€‚\nç¡®ä¿ JSON æ ¼å¼åˆæ³•ã€‚\nä¸è¦ä½¿ç”¨ if __name__ == '__main__':ã€‚\n"
        selected: false
        title: testcase agent
        type: llm
        vision:
          enabled: false
      height: 115
      id: '1766667562386'
      position:
        x: 1365
        y: 201
      positionAbsolute:
        x: 1365
        y: 201
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        outputs:
        - value_selector:
          - '1766681217998'
          - current_code
          value_type: string
          variable: output
        selected: false
        title: è¾“å‡º
        type: end
      height: 87
      id: '1766680328187'
      position:
        x: 4580
        y: 215
      positionAbsolute:
        x: 4580
        y: 215
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        break_conditions: []
        error_handle_mode: terminated
        height: 518
        logical_operator: and
        loop_count: 3
        loop_variables:
        - id: 830d1fc9-96bc-4ba1-b05b-9f2ab4e2cae9
          label: current_code
          value:
          - '17667737781900'
          - current_code
          value_type: variable
          var_type: string
        - id: b69e4f08-ee66-49e7-af2c-4845110025ed
          label: current_testcase
          value:
          - '17668141792250'
          - current_testcase
          value_type: variable
          var_type: string
        selected: false
        start_node_id: 1766681217998start
        title: å¾ªç¯
        type: loop
        width: 2433
      height: 518
      id: '1766681217998'
      position:
        x: 2047
        y: 0
      positionAbsolute:
        x: 2047
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 2433
      zIndex: 1
    - data:
        desc: ''
        isInLoop: true
        selected: false
        title: ''
        type: loop-start
      draggable: false
      height: 48
      id: 1766681217998start
      parentId: '1766681217998'
      position:
        x: 60
        y: 173
      positionAbsolute:
        x: 2107
        y: 173
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-loop-start
      width: 44
      zIndex: 1002
    - data:
        author: Zhuang Keju
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: ''
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1766681921022'
      position:
        x: 878.4648134797859
        y: 615.3529237451298
      positionAbsolute:
        x: 878.4648134797859
        y: 615.3529237451298
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 8fe66ca4-5c80-4bf3-a797-56faa5c10819
            value: false
            varType: boolean
            variable_selector:
            - '1766769356726'
            - is_pass
          id: 'true'
          logical_operator: and
        isInLoop: true
        selected: false
        title: æ¡ä»¶åˆ†æ”¯ (1)
        type: if-else
      height: 123
      id: '17666823941251'
      parentId: '1766681217998'
      position:
        x: 1147
        y: 135
      positionAbsolute:
        x: 3194
        y: 135
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        selected: false
        title: é€€å‡ºå¾ªç¯
        type: loop-end
      height: 53
      id: '1766682485472'
      parentId: '1766681217998'
      position:
        x: 1488
        y: 60
      positionAbsolute:
        x: 3535
        y: 60
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-simple
      width: 244
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 13d78372-655a-4b59-9419-8b54ed53876c
          role: system
          text: 'å½“å‰ä»£ç æœªé€šè¿‡æµ‹è¯•ï¼Œæµ‹è¯•åé¦ˆå¦‚ä¸‹ï¼š

            {{#1766769356726.error_log#}}

            å½“å‰ä»£ç å¦‚ä¸‹ï¼š

            {{#1766681217998.current_code#}}

            ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®æµ‹è¯•åé¦ˆä¿®å¤ä»£ç ã€‚

            ä¿®å¤è¦æ±‚ï¼š

            1. åªè¿›è¡Œä¸ºä¿®å¤å¤±è´¥åŸå› æ‰€å¿…éœ€çš„æœ€å°ä¿®æ”¹

            2. ä¸è¦é‡æ„æ•´ä½“æ¶æ„

            3. ä¿æŒç¨‹åºçš„è¿è¡Œæ–¹å¼ä¸å…¥å£ä¸å˜

            4. ä¿®å¤ååº”æ»¡è¶³æ‰€æœ‰æµ‹è¯•è¦æ±‚ä¸äº§å“è§„èŒƒ

            è¾“å‡ºè¦æ±‚ï¼š

            - åªè¾“å‡ºã€ä¿®å¤åçš„å®Œæ•´ä»£ç ã€‘

            - ä¸è¦è¾“å‡ºä»»ä½•è§£é‡Šã€è¯´æ˜æˆ– Markdown'
        selected: false
        title: Debugging Agent
        type: llm
        vision:
          enabled: false
      height: 87
      id: '1766682500741'
      parentId: '1766681217998'
      position:
        x: 1488
        y: 173
      positionAbsolute:
        x: 3535
        y: 173
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: true
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1766771232701'
          - current_code
          variable_selector:
          - '1766681217998'
          - current_code
          write_mode: over-write
        loop_id: '1766681217998'
        selected: false
        title: å˜é‡èµ‹å€¼
        type: assigner
        version: '2'
      height: 83
      id: '1766682647945'
      parentId: '1766681217998'
      position:
        x: 2130
        y: 175
      positionAbsolute:
        x: 4177
        y: 175
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-325
            key: ''
            type: text
            value: '{{#1766774144559.payload#}}'
          type: json
        headers: Authorization:Bearer {{#env.API_KEY#}}
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: Code Exec API
        type: http-request
        url: https://vercel-code-runner.vercel.app/api/exec
        variables: []
      height: 136
      id: '1766769039651'
      parentId: '1766681217998'
      position:
        x: 505
        y: 129
      positionAbsolute:
        x: 2552
        y: 129
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    - data:
        code: "import json\n\ndef main(exec_output: str) -> dict:\n    # exec_output\
          \ æ˜¯ HTTP èŠ‚ç‚¹è¾“å‡ºçš„ Body å­—ç¬¦ä¸²\n    try:\n        result = json.loads(exec_output)\n\
          \    except:\n        return {\"is_pass\": False, \"error_log\": \"Vercel\
          \ response parse failed\"}\n\n    # ç›´æ¥è¯»å– Vercel è¿”å›çš„å¸ƒå°”å€¼\n    is_pass = result.get(\"\
          is_pass\", False)\n    \n    # æ„é€ ç»™ Debugger çœ‹çš„é”™è¯¯æ—¥å¿—\n    # å¦‚æœå¤±è´¥ï¼Œé‡ç‚¹å±•ç¤º stderr\
          \ (unittest è¾“å‡º) å’Œ error (å †æ ˆä¿¡æ¯)\n    error_log = \"\"\n    if not is_pass:\n\
          \        error_log = f\"Summary: {result.get('summary')}\\n\"\n        error_log\
          \ += f\"Details:\\n{result.get('stderr')}\\n\"\n        if result.get('error'):\n\
          \             error_log += f\"Traceback:\\n{result.get('error')}\"\n   \
          \ \n    return {\n        \"is_pass\": is_pass,\n        \"error_log\":\
          \ error_log\n    }"
        code_language: python3
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        outputs:
          error_log:
            children: null
            type: string
          is_pass:
            children: null
            type: boolean
        selected: false
        title: QA Judge
        type: code
        variables:
        - value_selector:
          - '1766769039651'
          - body
          value_type: string
          variable: exec_output
      height: 51
      id: '1766769356726'
      parentId: '1766681217998'
      position:
        x: 826
        y: 171
      positionAbsolute:
        x: 2873
        y: 171
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    - data:
        code: "import re\nimport json\n\ndef main(llm_output: str) -> dict:\n    code\
          \ = llm_output.strip()\n    \n    # ----------------------------------------\n\
          \    # 1. å°è¯•å‰¥ç¦» Markdown (```python ... ```)\n    # ----------------------------------------\n\
          \    # è¿™é‡Œçš„æ­£åˆ™è§£é‡Šï¼š\n    # ```             -> åŒ¹é…å¼€å¤´åå¼•å·\n    # (?:python|json)?\
          \ -> å¯é€‰çš„è¯­è¨€æ ‡è®° (python æˆ– json)ï¼Œ?:è¡¨ç¤ºä¸æ•è·\n    # \\s* -> åƒæ‰æ¢è¡Œç¬¦\n    # (.*?) \
          \          -> æ ¸å¿ƒæ•è·ç»„ï¼šæå–ä¸­é—´çš„æ‰€æœ‰ä»£ç  (éè´ªå©ª)\n    # ```             -> åŒ¹é…ç»“å°¾åå¼•å·\n\
          \    # re.DOTALL       -> è®©ç‚¹å·(.)å¯ä»¥åŒ¹é…æ¢è¡Œç¬¦ï¼Œè¿™å¾ˆå…³é”®ï¼\n    pattern = r\"```(?:python|json)?\\\
          s*(.*?)```\"\n    match = re.search(pattern, code, re.DOTALL | re.IGNORECASE)\n\
          \    \n    if match:\n        code = match.group(1).strip()\n    \n    #\
          \ ----------------------------------------\n    # 2. å¦‚æœè¿™æœ¬èº«æ˜¯ä¸€æ®µ JSON å­—ç¬¦ä¸²ï¼ˆæœ‰æ—¶å€™\
          \ LLM ä¼šæŠŠ JSON åŒ…åœ¨ Markdown é‡Œï¼‰\n    #    æˆ‘ä»¬éœ€è¦æŠŠå®ƒè§£å¼€ï¼Œåªæ‹¿é‡Œé¢çš„ code å­—æ®µ\n    # ----------------------------------------\n\
          \n    # æˆ‘è§‰å¾—è¿™ä¸€æ®µå¯ä»¥æ³¨é‡Šæ‰\n    try:\n        # å°è¯•è§£æ JSON\n        data = json.loads(code)\n\
          \        if isinstance(data, dict) and \"code\" in data:\n            code\
          \ = data[\"code\"]\n    except json.JSONDecodeError:\n        # å¦‚æœä¸æ˜¯ JSONï¼Œé‚£è¯´æ˜å‰¥ç¦»\
          \ Markdown åå°±æ˜¯çº¯ Python ä»£ç äº†ï¼Œä¸åšå¤„ç†\n        pass\n\n    # http_body_struct\
          \ = {\n    #     \"code\": code\n    # }\n    # pythonæ‰“åŒ…jsonï¼Œä¸ç”¨difyæ‰“åŒ…\n\
          \    return {\n        # \"payload\": json.dumps(http_body_struct) ,\n \
          \       # è¾“å‡ºå˜æˆäº†å­—ç¬¦ä¸²ï¼š{\"code\": \"def ...\"}\n        \"current_code\": code\n\
          \n    }"
        code_language: python3
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        outputs:
          current_code:
            children: null
            type: string
        selected: false
        title: Code Cleaner
        type: code
        variables:
        - value_selector:
          - '1766682500741'
          - text
          value_type: string
          variable: llm_output
      height: 51
      id: '1766771232701'
      parentId: '1766681217998'
      position:
        x: 1809
        y: 191
      positionAbsolute:
        x: 3856
        y: 191
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    - data:
        code: "import re\nimport json\n\ndef main(llm_output: str) -> dict:\n    code\
          \ = llm_output.strip()\n    \n    # ----------------------------------------\n\
          \    # 1. å°è¯•å‰¥ç¦» Markdown (```python ... ```)\n    # ----------------------------------------\n\
          \    # è¿™é‡Œçš„æ­£åˆ™è§£é‡Šï¼š\n    # ```             -> åŒ¹é…å¼€å¤´åå¼•å·\n    # (?:python|json)?\
          \ -> å¯é€‰çš„è¯­è¨€æ ‡è®° (python æˆ– json)ï¼Œ?:è¡¨ç¤ºä¸æ•è·\n    # \\s* -> åƒæ‰æ¢è¡Œç¬¦\n    # (.*?) \
          \          -> æ ¸å¿ƒæ•è·ç»„ï¼šæå–ä¸­é—´çš„æ‰€æœ‰ä»£ç  (éè´ªå©ª)\n    # ```             -> åŒ¹é…ç»“å°¾åå¼•å·\n\
          \    # re.DOTALL       -> è®©ç‚¹å·(.)å¯ä»¥åŒ¹é…æ¢è¡Œç¬¦ï¼Œè¿™å¾ˆå…³é”®ï¼\n    pattern = r\"```(?:python|json)?\\\
          s*(.*?)```\"\n    match = re.search(pattern, code, re.DOTALL | re.IGNORECASE)\n\
          \    \n    if match:\n        code = match.group(1).strip()\n    \n    #\
          \ ----------------------------------------\n    # 2. å¦‚æœè¿™æœ¬èº«æ˜¯ä¸€æ®µ JSON å­—ç¬¦ä¸²ï¼ˆæœ‰æ—¶å€™\
          \ LLM ä¼šæŠŠ JSON åŒ…åœ¨ Markdown é‡Œï¼‰\n    #    æˆ‘ä»¬éœ€è¦æŠŠå®ƒè§£å¼€ï¼Œåªæ‹¿é‡Œé¢çš„ code å­—æ®µ\n    # ----------------------------------------\n\
          \n    # æˆ‘è§‰å¾—è¿™ä¸€æ®µå¯ä»¥æ³¨é‡Šæ‰\n    try:\n        # å°è¯•è§£æ JSON\n        data = json.loads(code)\n\
          \        if isinstance(data, dict) and \"code\" in data:\n            code\
          \ = data[\"code\"]\n    except json.JSONDecodeError:\n        # å¦‚æœä¸æ˜¯ JSONï¼Œé‚£è¯´æ˜å‰¥ç¦»\
          \ Markdown åå°±æ˜¯çº¯ Python ä»£ç äº†ï¼Œä¸åšå¤„ç†\n        pass\n\n    http_body_struct =\
          \ {\n        \"code\": code\n    }\n    # pythonæ‰“åŒ…jsonï¼Œä¸ç”¨difyæ‰“åŒ…\n    return\
          \ {\n        \"current_code\": code\n\n    }"
        code_language: python3
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        outputs:
          current_code:
            children: null
            type: string
        selected: false
        title: Code Cleaner (1)
        type: code
        variables:
        - value_selector:
          - '1766666714696'
          - text
          value_type: string
          variable: llm_output
      height: 51
      id: '17667737781900'
      position:
        x: 1024
        y: 233
      positionAbsolute:
        x: 1024
        y: 233
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    - data:
        code: "import json\n\ndef main(current_code: str, current_testcase: str) ->\
          \ dict:\n    # æ„é€  Payload å­—å…¸\n    # è¿™é‡Œå¯ä»¥æ‰©å±•ï¼šå¦‚æœä½ ä»¥åæƒ³ä¼  test_casesï¼Œä¹Ÿå¯ä»¥åŠ åœ¨è¿™é‡Œ\n\
          \    assert current_testcase is not None\n    payload_dict = {\n       \
          \ \"code\": current_code,\n        \"test\": current_testcase\n    }\n \
          \   \n    return {\n        \"payload\": json.dumps(payload_dict)\n    }"
        code_language: python3
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        outputs:
          payload:
            children: null
            type: string
        selected: false
        title: payload parser
        type: code
        variables:
        - value_selector:
          - '1766681217998'
          - current_code
          value_type: string
          variable: current_code
        - value_selector:
          - '1766681217998'
          - current_testcase
          value_type: string
          variable: current_testcase
      height: 51
      id: '1766774144559'
      parentId: '1766681217998'
      position:
        x: 184
        y: 171
      positionAbsolute:
        x: 2231
        y: 171
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    - data:
        code: "import re\nimport json\n\ndef remove_trailing_slash(content):\n   \
          \ # === âœ‚ï¸ æ ¸å¿ƒæ¸…æ´—åŒº Start ===\n    \n    # 1. ç§»é™¤é¦–å°¾ç©ºç™½\n    content = content.strip()\n\
          \    \n    # 2. \U0001F525 æš´åŠ›ç§»é™¤æœ«å°¾çš„åƒåœ¾å­—ç¬¦ /n æˆ– \\n \n    # æœ‰æ—¶å€™æ¨¡å‹ä¼šé‡å¤å†™å¥½å‡ ä¸ªï¼Œæ‰€ä»¥ç”¨\
          \ while å¾ªç¯åˆ å¹²å‡€\n    while content.endswith(\"/n\") or content.endswith(\"\
          \\\\n\"):\n        if content.endswith(\"/n\"):\n            content = content[:-2]\n\
          \        elif content.endswith(\"\\\\n\"):\n            content = content[:-2]\n\
          \    \n    # 3. å†æ¬¡ç§»é™¤å¯èƒ½å‰©ä¸‹çš„ç©ºç™½\n    content = content.strip()\n    return content\n\
          \n\n\n\ndef main(llm_output: str) -> dict:\n    code = llm_output.strip()\n\
          \    \n    # ----------------------------------------\n    # 1. å°è¯•å‰¥ç¦» Markdown\
          \ (```python ... ```)\n    # ----------------------------------------\n\
          \    # è¿™é‡Œçš„æ­£åˆ™è§£é‡Šï¼š\n    # ```             -> åŒ¹é…å¼€å¤´åå¼•å·\n    # (?:python|json)?\
          \ -> å¯é€‰çš„è¯­è¨€æ ‡è®° (python æˆ– json)ï¼Œ?:è¡¨ç¤ºä¸æ•è·\n    # \\s* -> åƒæ‰æ¢è¡Œç¬¦\n    # (.*?) \
          \          -> æ ¸å¿ƒæ•è·ç»„ï¼šæå–ä¸­é—´çš„æ‰€æœ‰ä»£ç  (éè´ªå©ª)\n    # ```             -> åŒ¹é…ç»“å°¾åå¼•å·\n\
          \    # re.DOTALL       -> è®©ç‚¹å·(.)å¯ä»¥åŒ¹é…æ¢è¡Œç¬¦ï¼Œè¿™å¾ˆå…³é”®ï¼\n    pattern = r\"```(?:python|json)?\\\
          s*(.*?)```\"\n    match = re.search(pattern, code, re.DOTALL | re.IGNORECASE)\n\
          \    \n    if match:\n        code = match.group(1).strip()\n    \n    #\
          \ ----------------------------------------\n    # 2. å¦‚æœè¿™æœ¬èº«æ˜¯ä¸€æ®µ JSON å­—ç¬¦ä¸²ï¼ˆæœ‰æ—¶å€™\
          \ LLM ä¼šæŠŠ JSON åŒ…åœ¨ Markdown é‡Œï¼‰\n    #    æˆ‘ä»¬éœ€è¦æŠŠå®ƒè§£å¼€ï¼Œåªæ‹¿é‡Œé¢çš„ code å­—æ®µ\n    # ----------------------------------------\n\
          \n    # æˆ‘è§‰å¾—è¿™ä¸€æ®µå¯ä»¥æ³¨é‡Šæ‰\n    try:\n        # å°è¯•è§£æ JSON\n        data = json.loads(code)\n\
          \        if isinstance(data, dict) and \"code\" in data:\n            code\
          \ = data[\"code\"]\n    except json.JSONDecodeError:\n        # å¦‚æœä¸æ˜¯ JSONï¼Œé‚£è¯´æ˜å‰¥ç¦»\
          \ Markdown åå°±æ˜¯çº¯ Python ä»£ç äº†ï¼Œä¸åšå¤„ç†\n        pass\n\n    code = json.loads(code)\n\
          \    if isinstance(code, dict):\n        code = [code]\n    code_extracted\
          \ = \"\"\n    for obj in code:\n        if obj[\"suffix\"] == \"py\":\n\
          \            obj_code = obj[\"content\"]\n            obj_code = remove_trailing_slash(obj_code)\n\
          \            code_extracted += obj_code + \"\\n\"\n\n    # pythonæ‰“åŒ…jsonï¼Œä¸ç”¨difyæ‰“åŒ…\n\
          \    return {\n        \"current_testcase\": code_extracted\n\n    }"
        code_language: python3
        isInIteration: false
        isInLoop: true
        loop_id: '1766681217998'
        outputs:
          current_testcase:
            children: null
            type: string
        selected: false
        title: Code Cleaner (2)
        type: code
        variables:
        - value_selector:
          - '1766667562386'
          - text
          value_type: string
          variable: llm_output
      height: 51
      id: '17668141792250'
      position:
        x: 1706
        y: 233
      positionAbsolute:
        x: 1706
        y: 233
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
      zIndex: 1002
    viewport:
      x: -1148.6270005879355
      y: 206.04613241184686
      zoom: 0.4113315376233915
  rag_pipeline_variables: []
